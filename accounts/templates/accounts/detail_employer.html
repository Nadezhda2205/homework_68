{% extends 'base.html' %}
{% load static %}

{% block title %}
    Страница работодателя 
{% endblock %}


{% block content %}

<div class = "row">
  <div class = "col-md-3 col-sm-6 me-5">
    {% if account.photo %}
        <img class="rounded-circle" src="{{ account.photo.url }}" alt="image" height="250" width="250">
    {% else %}
        <img class="rounded-circle" src="{% static 'img/no_photo_company.jpg' %}" alt="image" height="400" >
    {%endif%} 
  </div>
  <div class = "col-md-7 col-sm-6">
    <h3>{{ account.name }}</h3>
  
    {% if account.description %}
      <p>{{ account.description }}</p>
    {% endif %}

  </div>
</div>



<h3>Список вакансий</h3>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Вакансия</th>
        <th scope="col">Зарплата</th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      {% for vacancy in account.vacancies.all %}
      {% if account == user or vacancy.is_public %}
        <tr>
          <td>
            <a href="{% url 'vacancy_detail' vacancy.pk %}">{{ vacancy.name }}</a>
            <div>{{vacancy.updated_at}}</div>
            {% if not vacancy.is_public %} <div>Не опубликовано</div> {% endif %}
          </td>
          <td>{{ vacancy.salary }} тенге</td>
          {% if account == user %}
            <td><a href="{% url 'vacancy_update' vacancy.pk %}">Редактировать</a></td>
            <td><a href="{% url 'vacancy_date_update' vacancy.pk %}">Обновить</a></td>
          {% endif %}

        </tr>
      {% endif %}
        
      {% endfor %}
    </tbody>
  </table>
  {% if account == user %}
    <h3>Список откликов на вакансии</h3>
    {% for vacancy in account.vacancies.all %}
      {% if vacancy.responses.all %}
        
        <div>Вакансия: {{ vacancy.name }}</div>
        <div>Откликнулись</div>
        {% for applicant in vacancy.applicants.all %}

          <div><a href="{% url 'account_detail' applicant.username %}">{{ applicant }}</a></div>
        {% endfor %}
      {% endif %}

    {% endfor %}
  {% endif %}
  
{% endblock %}
